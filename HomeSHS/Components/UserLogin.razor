@page "/login"

@using Microsoft.AspNetCore.Components.Forms;
@using SHC.Controllers;
@using SHC.Utilities;
@using SHC.Services;
@using SHC.Data

@inject IUserService userService;


<span class="login">Log In</span>

<input type="email" placeholder="Email address" class="form--input" @bind-value="request.Email">
<input type="password" placeholder="Password" class="form--input" @bind-value="request.Password">

<button class="form--submit" @onclick="Submit">Sign up</button>

<p>@response </p>

@code {
    LoginRequest request;
    UserController controller;
    string response = "response";

    protected override void OnInitialized()
    {
        // base.OnInitialized();

        controller = new UserController(userService);
        request = new LoginRequest();
    }

    async void Submit()
    {
        Console.WriteLine("Start Submitting");
        response = await controller.Login(request);
        request = new LoginRequest();
        StateHasChanged();
    }
}
