@page "/signup"

@using Microsoft.AspNetCore.Components.Forms;
@using SHC.Controllers;
@using SHC.Utilities;
@using SHC.Services;
@using SHC.Data

@inject IUserService userService;

<span class="signup"><b>Sign Up</b></span>
<br>
    <input placeholder="First Name" class="form--input" @bind-value="request.FirstName">
    <input placeholder="Last Name" class="form--input" @bind-value="request.LastName">
    <input type="email" placeholder="Email address" class="form--input" @bind-value="request.Email">
    <input type="password" placeholder="Password" class="form--input" @bind-value="request.Password">
    <input type="password" placeholder="Confirm password" class="form--input" @bind-value="request.PasswordConfirm">

    <button class="form--submit" @onclick="Submit">Sign up</button>

    <p>@response </p>

@code {
    RegisterRequest request;
    UserController controller;
    string response = "";

    protected override void OnInitialized()
    {
        // base.OnInitialized();

        controller = new UserController(userService);
        request = new RegisterRequest();
    }

    async void Submit()
    {
        Console.WriteLine("Start Submitting");
        response = await controller.HandleRegisterRequest(request);
        request = new RegisterRequest();
        StateHasChanged();
        
    }
}
